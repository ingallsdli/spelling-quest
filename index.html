<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lincoln's Spelling Quest</title>
<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:#0b1220;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.app{
  max-width:900px;
  width:100%;
  padding:20px;
}
button,input{
  font-size:20px;
  padding:14px;
  border-radius:12px;
}
button{
  background:#2c61ff;
  color:white;
  border:none;
  margin:6px;
}
input{
  width:100%;
}
.msg{
  margin-top:10px;
  min-height:40px;
  font-weight:600;
}
</style>
</head>

<body>
<div class="app">
  <h1>Lincoln's Spelling Quest</h1>
  <p>Listen to the word. Type it. Pass 10 words.</p>

  <button onclick="start()">â–¶ Start / Next Word</button>
  <button onclick="hear()">ðŸ”Š Hear Again</button>

  <input id="answer" placeholder="Type hereâ€¦" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <button onclick="check()">âœ… Check</button>

  <div class="msg" id="msg">Tap Start to begin.</div>
</div>

<script>
/* ===== WORDS (hidden from learner) ===== */
const WORDS = [
  "because","before","around","first","found",
  "would","where","right","little","always"
];

let index = 0;
let passed = 0;

/* ===== VOICE SETUP (Windows-friendly + female-first) ===== */
let VOICES = [];
function loadVoices(){
  VOICES = window.speechSynthesis.getVoices() || [];
}
window.speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

function pickVoice(){
  // Prefer female-sounding Microsoft voices first (Windows)
  const preferredFemale = ["Zira", "Aria", "Jenny"];

  let v =
    VOICES.find(v => preferredFemale.some(p => (v.name || "").includes(p))) ||
    VOICES.find(v => (v.lang || "").startsWith("en") && /female|woman|zira|aria|jenny/i.test(v.name || "")) ||
    VOICES.find(v => (v.lang || "").startsWith("en")) ||
    VOICES[0];

  return v;
}

function speak(text){
  try{
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);

    const voice = pickVoice();
    if (voice) u.voice = voice;

    // Slower by ~7% vs 0.95 (0.95 * 0.93 â‰ˆ 0.88)
    u.rate = 0.88;

    // Slightly higher pitch tends to sound less robotic
    u.pitch = 1.08;

    u.lang = "en-US";
    window.speechSynthesis.speak(u);
  }catch(e){}
}

/* ===== GAME LOGIC ===== */
function start(){
  if(index >= WORDS.length){
    document.getElementById("msg").textContent = "ðŸŽ‰ Finished! Great job, Lincoln!";
    speak("You finished the lesson. Great job, Lincoln!");
    return;
  }
  // Audio only: do not show the word on screen
  document.getElementById("msg").textContent = `Word ${index+1} of ${WORDS.length}.`;
  speak("Okay Lincoln. The word is " + WORDS[index]);
